{
  "id": "5d9a5ba5-2e90-4f42-8fb6-d1ae19eb2cc7",
  "prevId": "94eaa2b2-c4c6-408d-87c4-e5ff4ec69ce8",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.ai_suggestions": {
      "name": "ai_suggestions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "suggestion_key": {
          "name": "suggestion_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "suggestion_category",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "impact": {
          "name": "impact",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "effort": {
          "name": "effort",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "actionable": {
          "name": "actionable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "action_label": {
          "name": "action_label",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "action_route": {
          "name": "action_route",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "suggestion_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'ACTIVE'"
        },
        "current_value": {
          "name": "current_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "target_value": {
          "name": "target_value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "progress_percent": {
          "name": "progress_percent",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "snapshot_metrics": {
          "name": "snapshot_metrics",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "actioned_at": {
          "name": "actioned_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "actioned_by_id": {
          "name": "actioned_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "dismissed_at": {
          "name": "dismissed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "dismiss_reason": {
          "name": "dismiss_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "auto_resolve_condition": {
          "name": "auto_resolve_condition",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_checked_at": {
          "name": "last_checked_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "ai_suggestions_organisation_id_organisations_id_fk": {
          "name": "ai_suggestions_organisation_id_organisations_id_fk",
          "tableFrom": "ai_suggestions",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "ai_suggestions_actioned_by_id_users_id_fk": {
          "name": "ai_suggestions_actioned_by_id_users_id_fk",
          "tableFrom": "ai_suggestions",
          "tableTo": "users",
          "columnsFrom": [
            "actioned_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.api_clients": {
      "name": "api_clients",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "api_key": {
          "name": "api_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "api_key_prefix": {
          "name": "api_key_prefix",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "api_secret": {
          "name": "api_secret",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scopes": {
          "name": "scopes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "rate_limit_override": {
          "name": "rate_limit_override",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "api_client_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'ACTIVE'"
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "request_count": {
          "name": "request_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_by_id": {
          "name": "created_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "api_clients_organisation_id_organisations_id_fk": {
          "name": "api_clients_organisation_id_organisations_id_fk",
          "tableFrom": "api_clients",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "api_clients_created_by_id_users_id_fk": {
          "name": "api_clients_created_by_id_users_id_fk",
          "tableFrom": "api_clients",
          "tableTo": "users",
          "columnsFrom": [
            "created_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "api_clients_api_key_unique": {
          "name": "api_clients_api_key_unique",
          "nullsNotDistinct": false,
          "columns": [
            "api_key"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.api_keys": {
      "name": "api_keys",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "key_hash": {
          "name": "key_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "key_prefix": {
          "name": "key_prefix",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "scopes": {
          "name": "scopes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "api_keys_organisation_id_organisations_id_fk": {
          "name": "api_keys_organisation_id_organisations_id_fk",
          "tableFrom": "api_keys",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.api_logs": {
      "name": "api_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "method": {
          "name": "method",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "path": {
          "name": "path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status_code": {
          "name": "status_code",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "duration": {
          "name": "duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "request_body": {
          "name": "request_body",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "response_body": {
          "name": "response_body",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "api_logs_user_id_users_id_fk": {
          "name": "api_logs_user_id_users_id_fk",
          "tableFrom": "api_logs",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.api_metrics": {
      "name": "api_metrics",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "endpoint": {
          "name": "endpoint",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "method": {
          "name": "method",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "date": {
          "name": "date",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "request_count": {
          "name": "request_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "error_count": {
          "name": "error_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "avg_duration": {
          "name": "avg_duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "p95_duration": {
          "name": "p95_duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "min_duration": {
          "name": "min_duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "max_duration": {
          "name": "max_duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.audit_events": {
      "name": "audit_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "actor_id": {
          "name": "actor_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "actor_name": {
          "name": "actor_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "actor_type": {
          "name": "actor_type",
          "type": "audit_actor_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'USER'"
        },
        "event_type": {
          "name": "event_type",
          "type": "audit_event_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "audit_entity_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "entity_name": {
          "name": "entity_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "property_id": {
          "name": "property_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "certificate_id": {
          "name": "certificate_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "before_state": {
          "name": "before_state",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "after_state": {
          "name": "after_state",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "changes": {
          "name": "changes",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "audit_events_organisation_id_organisations_id_fk": {
          "name": "audit_events_organisation_id_organisations_id_fk",
          "tableFrom": "audit_events",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "audit_events_property_id_properties_id_fk": {
          "name": "audit_events_property_id_properties_id_fk",
          "tableFrom": "audit_events",
          "tableTo": "properties",
          "columnsFrom": [
            "property_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "audit_events_certificate_id_certificates_id_fk": {
          "name": "audit_events_certificate_id_certificates_id_fk",
          "tableFrom": "audit_events",
          "tableTo": "certificates",
          "columnsFrom": [
            "certificate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.audit_field_changes": {
      "name": "audit_field_changes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "audit_event_id": {
          "name": "audit_event_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "table_name": {
          "name": "table_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "record_id": {
          "name": "record_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "change_scope": {
          "name": "change_scope",
          "type": "change_scope",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "field_name": {
          "name": "field_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "field_label": {
          "name": "field_label",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "previous_value": {
          "name": "previous_value",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "new_value": {
          "name": "new_value",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "is_significant": {
          "name": "is_significant",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "audit_field_changes_audit_event_id_audit_events_id_fk": {
          "name": "audit_field_changes_audit_event_id_audit_events_id_fk",
          "tableFrom": "audit_field_changes",
          "tableTo": "audit_events",
          "columnsFrom": [
            "audit_event_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.benchmark_items": {
      "name": "benchmark_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "benchmark_set_id": {
          "name": "benchmark_set_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "certificate_id": {
          "name": "certificate_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "expected_output": {
          "name": "expected_output",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "difficulty": {
          "name": "difficulty",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'medium'"
        },
        "challenge_types": {
          "name": "challenge_types",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "benchmark_items_benchmark_set_id_benchmark_sets_id_fk": {
          "name": "benchmark_items_benchmark_set_id_benchmark_sets_id_fk",
          "tableFrom": "benchmark_items",
          "tableTo": "benchmark_sets",
          "columnsFrom": [
            "benchmark_set_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "benchmark_items_certificate_id_certificates_id_fk": {
          "name": "benchmark_items_certificate_id_certificates_id_fk",
          "tableFrom": "benchmark_items",
          "tableTo": "certificates",
          "columnsFrom": [
            "certificate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.benchmark_sets": {
      "name": "benchmark_sets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "document_types": {
          "name": "document_types",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "is_locked": {
          "name": "is_locked",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "item_count": {
          "name": "item_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "locked_at": {
          "name": "locked_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.blocks": {
      "name": "blocks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "scheme_id": {
          "name": "scheme_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reference": {
          "name": "reference",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "has_lift": {
          "name": "has_lift",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "has_communal_boiler": {
          "name": "has_communal_boiler",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "compliance_status": {
          "name": "compliance_status",
          "type": "compliance_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'UNKNOWN'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "blocks_scheme_id_schemes_id_fk": {
          "name": "blocks_scheme_id_schemes_id_fk",
          "tableFrom": "blocks",
          "tableTo": "schemes",
          "columnsFrom": [
            "scheme_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.certificate_detection_patterns": {
      "name": "certificate_detection_patterns",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "certificate_type_id": {
          "name": "certificate_type_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "certificate_type_code": {
          "name": "certificate_type_code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pattern_type": {
          "name": "pattern_type",
          "type": "detection_pattern_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "matcher_type": {
          "name": "matcher_type",
          "type": "detection_matcher_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'CONTAINS'"
        },
        "pattern": {
          "name": "pattern",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "case_sensitive": {
          "name": "case_sensitive",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "additional_patterns": {
          "name": "additional_patterns",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "is_system": {
          "name": "is_system",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "certificate_detection_patterns_certificate_type_id_certificate_types_id_fk": {
          "name": "certificate_detection_patterns_certificate_type_id_certificate_types_id_fk",
          "tableFrom": "certificate_detection_patterns",
          "tableTo": "certificate_types",
          "columnsFrom": [
            "certificate_type_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.certificate_outcome_rules": {
      "name": "certificate_outcome_rules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "certificate_type_id": {
          "name": "certificate_type_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "certificate_type_code": {
          "name": "certificate_type_code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "rule_name": {
          "name": "rule_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "rule_group": {
          "name": "rule_group",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "field_path": {
          "name": "field_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "operator": {
          "name": "operator",
          "type": "outcome_rule_operator",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "value_list": {
          "name": "value_list",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "array_field_path": {
          "name": "array_field_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "array_match_patterns": {
          "name": "array_match_patterns",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "outcome": {
          "name": "outcome",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'UNSATISFACTORY'"
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "stop_on_match": {
          "name": "stop_on_match",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "legislation": {
          "name": "legislation",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "is_system": {
          "name": "is_system",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "certificate_outcome_rules_certificate_type_id_certificate_types_id_fk": {
          "name": "certificate_outcome_rules_certificate_type_id_certificate_types_id_fk",
          "tableFrom": "certificate_outcome_rules",
          "tableTo": "certificate_types",
          "columnsFrom": [
            "certificate_type_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.certificate_types": {
      "name": "certificate_types",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "short_name": {
          "name": "short_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "compliance_stream": {
          "name": "compliance_stream",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stream_id": {
          "name": "stream_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "validity_months": {
          "name": "validity_months",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 12
        },
        "warning_days": {
          "name": "warning_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 30
        },
        "required_fields": {
          "name": "required_fields",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "certificate_types_stream_id_compliance_streams_id_fk": {
          "name": "certificate_types_stream_id_compliance_streams_id_fk",
          "tableFrom": "certificate_types",
          "tableTo": "compliance_streams",
          "columnsFrom": [
            "stream_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "certificate_types_code_unique": {
          "name": "certificate_types_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.certificate_versions": {
      "name": "certificate_versions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "certificate_id": {
          "name": "certificate_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "version_number": {
          "name": "version_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "file_name": {
          "name": "file_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_type": {
          "name": "file_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_size": {
          "name": "file_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "storage_key": {
          "name": "storage_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "extracted_data": {
          "name": "extracted_data",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "extraction_run_id": {
          "name": "extraction_run_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "uploaded_by_id": {
          "name": "uploaded_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "upload_reason": {
          "name": "upload_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "superseded_at": {
          "name": "superseded_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "superseded_by_id": {
          "name": "superseded_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "superseded_reason": {
          "name": "superseded_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "certificate_versions_certificate_id_certificates_id_fk": {
          "name": "certificate_versions_certificate_id_certificates_id_fk",
          "tableFrom": "certificate_versions",
          "tableTo": "certificates",
          "columnsFrom": [
            "certificate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "certificate_versions_uploaded_by_id_users_id_fk": {
          "name": "certificate_versions_uploaded_by_id_users_id_fk",
          "tableFrom": "certificate_versions",
          "tableTo": "users",
          "columnsFrom": [
            "uploaded_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.certificates": {
      "name": "certificates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "property_id": {
          "name": "property_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "block_id": {
          "name": "block_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "batch_id": {
          "name": "batch_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "file_name": {
          "name": "file_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_type": {
          "name": "file_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_size": {
          "name": "file_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "storage_key": {
          "name": "storage_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "certificate_type": {
          "name": "certificate_type",
          "type": "certificate_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "compliance_stream_id": {
          "name": "compliance_stream_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "certificate_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'UPLOADED'"
        },
        "certificate_number": {
          "name": "certificate_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "issue_date": {
          "name": "issue_date",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "outcome": {
          "name": "outcome",
          "type": "certificate_outcome",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "uploaded_by_id": {
          "name": "uploaded_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "reviewed_by_id": {
          "name": "reviewed_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "reviewed_at": {
          "name": "reviewed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "current_version_id": {
          "name": "current_version_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "certificates_organisation_id_organisations_id_fk": {
          "name": "certificates_organisation_id_organisations_id_fk",
          "tableFrom": "certificates",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "certificates_property_id_properties_id_fk": {
          "name": "certificates_property_id_properties_id_fk",
          "tableFrom": "certificates",
          "tableTo": "properties",
          "columnsFrom": [
            "property_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "certificates_block_id_blocks_id_fk": {
          "name": "certificates_block_id_blocks_id_fk",
          "tableFrom": "certificates",
          "tableTo": "blocks",
          "columnsFrom": [
            "block_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "certificates_batch_id_ingestion_batches_id_fk": {
          "name": "certificates_batch_id_ingestion_batches_id_fk",
          "tableFrom": "certificates",
          "tableTo": "ingestion_batches",
          "columnsFrom": [
            "batch_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "certificates_uploaded_by_id_users_id_fk": {
          "name": "certificates_uploaded_by_id_users_id_fk",
          "tableFrom": "certificates",
          "tableTo": "users",
          "columnsFrom": [
            "uploaded_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "certificates_reviewed_by_id_users_id_fk": {
          "name": "certificates_reviewed_by_id_users_id_fk",
          "tableFrom": "certificates",
          "tableTo": "users",
          "columnsFrom": [
            "reviewed_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.chatbot_analytics": {
      "name": "chatbot_analytics",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "date": {
          "name": "date",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "hour": {
          "name": "hour",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_queries": {
          "name": "total_queries",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "static_responses": {
          "name": "static_responses",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "faq_hits": {
          "name": "faq_hits",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "database_queries": {
          "name": "database_queries",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "rag_queries": {
          "name": "rag_queries",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "llm_queries": {
          "name": "llm_queries",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_input_tokens": {
          "name": "total_input_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_output_tokens": {
          "name": "total_output_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "estimated_cost_cents": {
          "name": "estimated_cost_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "avg_response_time_ms": {
          "name": "avg_response_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "top_intents": {
          "name": "top_intents",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "top_topics": {
          "name": "top_topics",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.chatbot_conversations": {
      "name": "chatbot_conversations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "message_count": {
          "name": "message_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "tokens_used": {
          "name": "tokens_used",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_message_at": {
          "name": "last_message_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "chatbot_conversations_user_id_users_id_fk": {
          "name": "chatbot_conversations_user_id_users_id_fk",
          "tableFrom": "chatbot_conversations",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.chatbot_messages": {
      "name": "chatbot_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "intent": {
          "name": "intent",
          "type": "chat_intent",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "response_source": {
          "name": "response_source",
          "type": "chat_response_source",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "confidence": {
          "name": "confidence",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "input_tokens": {
          "name": "input_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "output_tokens": {
          "name": "output_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "response_time_ms": {
          "name": "response_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "rag_documents_used": {
          "name": "rag_documents_used",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "chatbot_messages_conversation_id_chatbot_conversations_id_fk": {
          "name": "chatbot_messages_conversation_id_chatbot_conversations_id_fk",
          "tableFrom": "chatbot_messages",
          "tableTo": "chatbot_conversations",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.classification_codes": {
      "name": "classification_codes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "certificate_type_id": {
          "name": "certificate_type_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "compliance_stream_id": {
          "name": "compliance_stream_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "severity": {
          "name": "severity",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "color_code": {
          "name": "color_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "action_required": {
          "name": "action_required",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "timeframe_hours": {
          "name": "timeframe_hours",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "auto_create_action": {
          "name": "auto_create_action",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "action_severity": {
          "name": "action_severity",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cost_estimate_low": {
          "name": "cost_estimate_low",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "cost_estimate_high": {
          "name": "cost_estimate_high",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "classification_codes_certificate_type_id_certificate_types_id_fk": {
          "name": "classification_codes_certificate_type_id_certificate_types_id_fk",
          "tableFrom": "classification_codes",
          "tableTo": "certificate_types",
          "columnsFrom": [
            "certificate_type_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.compliance_rules": {
      "name": "compliance_rules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "rule_code": {
          "name": "rule_code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "rule_name": {
          "name": "rule_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "document_type": {
          "name": "document_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "compliance_stream_id": {
          "name": "compliance_stream_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "conditions": {
          "name": "conditions",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "condition_logic": {
          "name": "condition_logic",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'AND'"
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "priority": {
          "name": "priority",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "legislation": {
          "name": "legislation",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "compliance_rules_rule_code_unique": {
          "name": "compliance_rules_rule_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "rule_code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.compliance_streams": {
      "name": "compliance_streams",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "color_code": {
          "name": "color_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "icon_name": {
          "name": "icon_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_system": {
          "name": "is_system",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "compliance_streams_code_unique": {
          "name": "compliance_streams_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.component_certificates": {
      "name": "component_certificates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "component_id": {
          "name": "component_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "certificate_id": {
          "name": "certificate_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "is_auto_linked": {
          "name": "is_auto_linked",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "extraction_confidence": {
          "name": "extraction_confidence",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "component_certificates_component_id_components_id_fk": {
          "name": "component_certificates_component_id_components_id_fk",
          "tableFrom": "component_certificates",
          "tableTo": "components",
          "columnsFrom": [
            "component_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "component_certificates_certificate_id_certificates_id_fk": {
          "name": "component_certificates_certificate_id_certificates_id_fk",
          "tableFrom": "component_certificates",
          "tableTo": "certificates",
          "columnsFrom": [
            "certificate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.component_types": {
      "name": "component_types",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "component_category",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hact_element_code": {
          "name": "hact_element_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expected_lifespan_years": {
          "name": "expected_lifespan_years",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "related_certificate_types": {
          "name": "related_certificate_types",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "inspection_frequency_months": {
          "name": "inspection_frequency_months",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_high_risk": {
          "name": "is_high_risk",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "building_safety_relevant": {
          "name": "building_safety_relevant",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "component_types_code_unique": {
          "name": "component_types_code_unique",
          "nullsNotDistinct": false,
          "columns": [
            "code"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.components": {
      "name": "components",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "property_id": {
          "name": "property_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "unit_id": {
          "name": "unit_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "block_id": {
          "name": "block_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "component_type_id": {
          "name": "component_type_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "asset_tag": {
          "name": "asset_tag",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "serial_number": {
          "name": "serial_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "manufacturer": {
          "name": "manufacturer",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "access_notes": {
          "name": "access_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "install_date": {
          "name": "install_date",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expected_replacement_date": {
          "name": "expected_replacement_date",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "warranty_expiry": {
          "name": "warranty_expiry",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "condition": {
          "name": "condition",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "source": {
          "name": "source",
          "type": "property_source",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'MANUAL'"
        },
        "needs_verification": {
          "name": "needs_verification",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "last_inspection_date": {
          "name": "last_inspection_date",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "next_inspection_due": {
          "name": "next_inspection_due",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "compliance_status": {
          "name": "compliance_status",
          "type": "compliance_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'UNKNOWN'"
        },
        "certificate_required": {
          "name": "certificate_required",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "risk_level": {
          "name": "risk_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_service_date": {
          "name": "last_service_date",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "next_service_due": {
          "name": "next_service_due",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "components_property_id_properties_id_fk": {
          "name": "components_property_id_properties_id_fk",
          "tableFrom": "components",
          "tableTo": "properties",
          "columnsFrom": [
            "property_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "components_unit_id_units_id_fk": {
          "name": "components_unit_id_units_id_fk",
          "tableFrom": "components",
          "tableTo": "units",
          "columnsFrom": [
            "unit_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "components_block_id_blocks_id_fk": {
          "name": "components_block_id_blocks_id_fk",
          "tableFrom": "components",
          "tableTo": "blocks",
          "columnsFrom": [
            "block_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "components_component_type_id_component_types_id_fk": {
          "name": "components_component_type_id_component_types_id_fk",
          "tableFrom": "components",
          "tableTo": "component_types",
          "columnsFrom": [
            "component_type_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.contractor_alerts": {
      "name": "contractor_alerts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "contractor_id": {
          "name": "contractor_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "certification_id": {
          "name": "certification_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "alert_type": {
          "name": "alert_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "severity": {
          "name": "severity",
          "type": "severity",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PRIORITY'"
        },
        "status": {
          "name": "status",
          "type": "risk_alert_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'OPEN'"
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "due_date": {
          "name": "due_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "sla_hours": {
          "name": "sla_hours",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "acknowledged_by_id": {
          "name": "acknowledged_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "acknowledged_at": {
          "name": "acknowledged_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_by_id": {
          "name": "resolved_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "resolution_notes": {
          "name": "resolution_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "contractor_alerts_organisation_id_organisations_id_fk": {
          "name": "contractor_alerts_organisation_id_organisations_id_fk",
          "tableFrom": "contractor_alerts",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "contractor_alerts_contractor_id_contractors_id_fk": {
          "name": "contractor_alerts_contractor_id_contractors_id_fk",
          "tableFrom": "contractor_alerts",
          "tableTo": "contractors",
          "columnsFrom": [
            "contractor_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "contractor_alerts_certification_id_contractor_certifications_id_fk": {
          "name": "contractor_alerts_certification_id_contractor_certifications_id_fk",
          "tableFrom": "contractor_alerts",
          "tableTo": "contractor_certifications",
          "columnsFrom": [
            "certification_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "contractor_alerts_acknowledged_by_id_users_id_fk": {
          "name": "contractor_alerts_acknowledged_by_id_users_id_fk",
          "tableFrom": "contractor_alerts",
          "tableTo": "users",
          "columnsFrom": [
            "acknowledged_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "contractor_alerts_resolved_by_id_users_id_fk": {
          "name": "contractor_alerts_resolved_by_id_users_id_fk",
          "tableFrom": "contractor_alerts",
          "tableTo": "users",
          "columnsFrom": [
            "resolved_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.contractor_assignments": {
      "name": "contractor_assignments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "contractor_id": {
          "name": "contractor_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "property_id": {
          "name": "property_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "remedial_action_id": {
          "name": "remedial_action_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "work_category": {
          "name": "work_category",
          "type": "contractor_work_category",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "scheduled_date": {
          "name": "scheduled_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "completed_date": {
          "name": "completed_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "action_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'OPEN'"
        },
        "verified_certifications": {
          "name": "verified_certifications",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "assigned_by_id": {
          "name": "assigned_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "assigned_at": {
          "name": "assigned_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "contractor_assignments_organisation_id_organisations_id_fk": {
          "name": "contractor_assignments_organisation_id_organisations_id_fk",
          "tableFrom": "contractor_assignments",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "contractor_assignments_contractor_id_contractors_id_fk": {
          "name": "contractor_assignments_contractor_id_contractors_id_fk",
          "tableFrom": "contractor_assignments",
          "tableTo": "contractors",
          "columnsFrom": [
            "contractor_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "contractor_assignments_property_id_properties_id_fk": {
          "name": "contractor_assignments_property_id_properties_id_fk",
          "tableFrom": "contractor_assignments",
          "tableTo": "properties",
          "columnsFrom": [
            "property_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "contractor_assignments_remedial_action_id_remedial_actions_id_fk": {
          "name": "contractor_assignments_remedial_action_id_remedial_actions_id_fk",
          "tableFrom": "contractor_assignments",
          "tableTo": "remedial_actions",
          "columnsFrom": [
            "remedial_action_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "contractor_assignments_assigned_by_id_users_id_fk": {
          "name": "contractor_assignments_assigned_by_id_users_id_fk",
          "tableFrom": "contractor_assignments",
          "tableTo": "users",
          "columnsFrom": [
            "assigned_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.contractor_certifications": {
      "name": "contractor_certifications",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "contractor_id": {
          "name": "contractor_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "registration_type": {
          "name": "registration_type",
          "type": "contractor_registration_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "registration_number": {
          "name": "registration_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "registration_name": {
          "name": "registration_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "issue_date": {
          "name": "issue_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "verification_status": {
          "name": "verification_status",
          "type": "contractor_verification_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'UNVERIFIED'"
        },
        "verified_at": {
          "name": "verified_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "verified_by_id": {
          "name": "verified_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "verification_method": {
          "name": "verification_method",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "verification_notes": {
          "name": "verification_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "work_categories": {
          "name": "work_categories",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "document_url": {
          "name": "document_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "document_id": {
          "name": "document_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "contractor_certifications_contractor_id_contractors_id_fk": {
          "name": "contractor_certifications_contractor_id_contractors_id_fk",
          "tableFrom": "contractor_certifications",
          "tableTo": "contractors",
          "columnsFrom": [
            "contractor_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "contractor_certifications_organisation_id_organisations_id_fk": {
          "name": "contractor_certifications_organisation_id_organisations_id_fk",
          "tableFrom": "contractor_certifications",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "contractor_certifications_verified_by_id_users_id_fk": {
          "name": "contractor_certifications_verified_by_id_users_id_fk",
          "tableFrom": "contractor_certifications",
          "tableTo": "users",
          "columnsFrom": [
            "verified_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.contractor_verification_history": {
      "name": "contractor_verification_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "contractor_id": {
          "name": "contractor_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "certification_id": {
          "name": "certification_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "verification_type": {
          "name": "verification_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "previous_status": {
          "name": "previous_status",
          "type": "contractor_verification_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "new_status": {
          "name": "new_status",
          "type": "contractor_verification_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "verified_by_id": {
          "name": "verified_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "verified_by_name": {
          "name": "verified_by_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "verification_method": {
          "name": "verification_method",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "lookup_url": {
          "name": "lookup_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "screenshot_url": {
          "name": "screenshot_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "registration_data_snapshot": {
          "name": "registration_data_snapshot",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "contractor_verification_history_contractor_id_contractors_id_fk": {
          "name": "contractor_verification_history_contractor_id_contractors_id_fk",
          "tableFrom": "contractor_verification_history",
          "tableTo": "contractors",
          "columnsFrom": [
            "contractor_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "contractor_verification_history_certification_id_contractor_certifications_id_fk": {
          "name": "contractor_verification_history_certification_id_contractor_certifications_id_fk",
          "tableFrom": "contractor_verification_history",
          "tableTo": "contractor_certifications",
          "columnsFrom": [
            "certification_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "contractor_verification_history_organisation_id_organisations_id_fk": {
          "name": "contractor_verification_history_organisation_id_organisations_id_fk",
          "tableFrom": "contractor_verification_history",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "contractor_verification_history_verified_by_id_users_id_fk": {
          "name": "contractor_verification_history_verified_by_id_users_id_fk",
          "tableFrom": "contractor_verification_history",
          "tableTo": "users",
          "columnsFrom": [
            "verified_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.contractors": {
      "name": "contractors",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "company_name": {
          "name": "company_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "trade_type": {
          "name": "trade_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "registration_number": {
          "name": "registration_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "contact_email": {
          "name": "contact_email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "contact_phone": {
          "name": "contact_phone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "gas_registration": {
          "name": "gas_registration",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "electrical_registration": {
          "name": "electrical_registration",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "contractor_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "contractors_organisation_id_organisations_id_fk": {
          "name": "contractors_organisation_id_organisations_id_fk",
          "tableFrom": "contractors",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.data_import_rows": {
      "name": "data_import_rows",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "import_id": {
          "name": "import_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "row_number": {
          "name": "row_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "import_row_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "source_data": {
          "name": "source_data",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "validation_errors": {
          "name": "validation_errors",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "created_record_id": {
          "name": "created_record_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "created_record_type": {
          "name": "created_record_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "processed_at": {
          "name": "processed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "data_import_rows_import_id_data_imports_id_fk": {
          "name": "data_import_rows_import_id_data_imports_id_fk",
          "tableFrom": "data_import_rows",
          "tableTo": "data_imports",
          "columnsFrom": [
            "import_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.data_imports": {
      "name": "data_imports",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "uploaded_by_id": {
          "name": "uploaded_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "import_type": {
          "name": "import_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_name": {
          "name": "file_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_type": {
          "name": "file_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_size": {
          "name": "file_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "column_mapping": {
          "name": "column_mapping",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "import_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "total_rows": {
          "name": "total_rows",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "valid_rows": {
          "name": "valid_rows",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "invalid_rows": {
          "name": "invalid_rows",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "imported_rows": {
          "name": "imported_rows",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "skipped_rows": {
          "name": "skipped_rows",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "upsert_mode": {
          "name": "upsert_mode",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "dry_run": {
          "name": "dry_run",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "error_summary": {
          "name": "error_summary",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "data_imports_organisation_id_organisations_id_fk": {
          "name": "data_imports_organisation_id_organisations_id_fk",
          "tableFrom": "data_imports",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "data_imports_uploaded_by_id_users_id_fk": {
          "name": "data_imports_uploaded_by_id_users_id_fk",
          "tableFrom": "data_imports",
          "tableTo": "users",
          "columnsFrom": [
            "uploaded_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.eval_runs": {
      "name": "eval_runs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "benchmark_set_id": {
          "name": "benchmark_set_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "model_version": {
          "name": "model_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "prompt_version": {
          "name": "prompt_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "schema_version": {
          "name": "schema_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "overall_score": {
          "name": "overall_score",
          "type": "real",
          "primaryKey": false,
          "notNull": true
        },
        "exact_match_rate": {
          "name": "exact_match_rate",
          "type": "real",
          "primaryKey": false,
          "notNull": true
        },
        "evidence_accuracy": {
          "name": "evidence_accuracy",
          "type": "real",
          "primaryKey": false,
          "notNull": true
        },
        "schema_valid_rate": {
          "name": "schema_valid_rate",
          "type": "real",
          "primaryKey": false,
          "notNull": true
        },
        "scores": {
          "name": "scores",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "item_results": {
          "name": "item_results",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "previous_run_id": {
          "name": "previous_run_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "regressions": {
          "name": "regressions",
          "type": "json",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::json"
        },
        "improvements": {
          "name": "improvements",
          "type": "json",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::json"
        },
        "score_delta": {
          "name": "score_delta",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "passed_gating": {
          "name": "passed_gating",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "gating_notes": {
          "name": "gating_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "eval_runs_benchmark_set_id_benchmark_sets_id_fk": {
          "name": "eval_runs_benchmark_set_id_benchmark_sets_id_fk",
          "tableFrom": "eval_runs",
          "tableTo": "benchmark_sets",
          "columnsFrom": [
            "benchmark_set_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.extraction_runs": {
      "name": "extraction_runs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "certificate_id": {
          "name": "certificate_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "schema_id": {
          "name": "schema_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "model_version": {
          "name": "model_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "prompt_version": {
          "name": "prompt_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "schema_version": {
          "name": "schema_version",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "document_type": {
          "name": "document_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "classification_confidence": {
          "name": "classification_confidence",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "raw_output": {
          "name": "raw_output",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "validated_output": {
          "name": "validated_output",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "repaired_output": {
          "name": "repaired_output",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "normalised_output": {
          "name": "normalised_output",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "final_output": {
          "name": "final_output",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "confidence": {
          "name": "confidence",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "processing_tier": {
          "name": "processing_tier",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 6
        },
        "tier_name": {
          "name": "tier_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "processing_time_ms": {
          "name": "processing_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "processing_cost": {
          "name": "processing_cost",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "validation_errors": {
          "name": "validation_errors",
          "type": "json",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::json"
        },
        "validation_passed": {
          "name": "validation_passed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "repair_attempts": {
          "name": "repair_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "status": {
          "name": "status",
          "type": "extraction_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "extraction_runs_certificate_id_certificates_id_fk": {
          "name": "extraction_runs_certificate_id_certificates_id_fk",
          "tableFrom": "extraction_runs",
          "tableTo": "certificates",
          "columnsFrom": [
            "certificate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "extraction_runs_schema_id_extraction_schemas_id_fk": {
          "name": "extraction_runs_schema_id_extraction_schemas_id_fk",
          "tableFrom": "extraction_runs",
          "tableTo": "extraction_schemas",
          "columnsFrom": [
            "schema_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.extraction_schemas": {
      "name": "extraction_schemas",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "version": {
          "name": "version",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "document_type": {
          "name": "document_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "compliance_stream_id": {
          "name": "compliance_stream_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "schema_json": {
          "name": "schema_json",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "prompt_template": {
          "name": "prompt_template",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_deprecated": {
          "name": "is_deprecated",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.extraction_tier_audits": {
      "name": "extraction_tier_audits",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "certificate_id": {
          "name": "certificate_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "extraction_run_id": {
          "name": "extraction_run_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "tier": {
          "name": "tier",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tier_order": {
          "name": "tier_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "attempted_at": {
          "name": "attempted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "processing_time_ms": {
          "name": "processing_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "status": {
          "name": "status",
          "type": "extraction_tier_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "confidence": {
          "name": "confidence",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "cost": {
          "name": "cost",
          "type": "real",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "extracted_field_count": {
          "name": "extracted_field_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "escalation_reason": {
          "name": "escalation_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "document_format": {
          "name": "document_format",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "document_classification": {
          "name": "document_classification",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "page_count": {
          "name": "page_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "text_quality": {
          "name": "text_quality",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "qr_codes_found": {
          "name": "qr_codes_found",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "metadata_extracted": {
          "name": "metadata_extracted",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "raw_output": {
          "name": "raw_output",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "extraction_tier_audits_certificate_id_certificates_id_fk": {
          "name": "extraction_tier_audits_certificate_id_certificates_id_fk",
          "tableFrom": "extraction_tier_audits",
          "tableTo": "certificates",
          "columnsFrom": [
            "certificate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "extraction_tier_audits_extraction_run_id_extraction_runs_id_fk": {
          "name": "extraction_tier_audits_extraction_run_id_extraction_runs_id_fk",
          "tableFrom": "extraction_tier_audits",
          "tableTo": "extraction_runs",
          "columnsFrom": [
            "extraction_run_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.extractions": {
      "name": "extractions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "certificate_id": {
          "name": "certificate_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "method": {
          "name": "method",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "prompt_version": {
          "name": "prompt_version",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "raw_response": {
          "name": "raw_response",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "extracted_data": {
          "name": "extracted_data",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "confidence": {
          "name": "confidence",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "text_quality": {
          "name": "text_quality",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "extractions_certificate_id_certificates_id_fk": {
          "name": "extractions_certificate_id_certificates_id_fk",
          "tableFrom": "extractions",
          "tableTo": "certificates",
          "columnsFrom": [
            "certificate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.factory_settings": {
      "name": "factory_settings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "key": {
          "name": "key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "value_type": {
          "name": "value_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'string'"
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'general'"
        },
        "is_editable": {
          "name": "is_editable",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "validation_rules": {
          "name": "validation_rules",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "updated_by_id": {
          "name": "updated_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "factory_settings_updated_by_id_users_id_fk": {
          "name": "factory_settings_updated_by_id_users_id_fk",
          "tableFrom": "factory_settings",
          "tableTo": "users",
          "columnsFrom": [
            "updated_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "factory_settings_key_unique": {
          "name": "factory_settings_key_unique",
          "nullsNotDistinct": false,
          "columns": [
            "key"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.factory_settings_audit": {
      "name": "factory_settings_audit",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "setting_id": {
          "name": "setting_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "key": {
          "name": "key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "old_value": {
          "name": "old_value",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "new_value": {
          "name": "new_value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "changed_by_id": {
          "name": "changed_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "changed_at": {
          "name": "changed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "factory_settings_audit_setting_id_factory_settings_id_fk": {
          "name": "factory_settings_audit_setting_id_factory_settings_id_fk",
          "tableFrom": "factory_settings_audit",
          "tableTo": "factory_settings",
          "columnsFrom": [
            "setting_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "factory_settings_audit_changed_by_id_users_id_fk": {
          "name": "factory_settings_audit_changed_by_id_users_id_fk",
          "tableFrom": "factory_settings_audit",
          "tableTo": "users",
          "columnsFrom": [
            "changed_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.human_reviews": {
      "name": "human_reviews",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "extraction_run_id": {
          "name": "extraction_run_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "reviewer_id": {
          "name": "reviewer_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "approved_output": {
          "name": "approved_output",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "field_changes": {
          "name": "field_changes",
          "type": "json",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::json"
        },
        "added_items": {
          "name": "added_items",
          "type": "json",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::json"
        },
        "removed_items": {
          "name": "removed_items",
          "type": "json",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'::json"
        },
        "error_tags": {
          "name": "error_tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "was_correct": {
          "name": "was_correct",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "change_count": {
          "name": "change_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "review_time_seconds": {
          "name": "review_time_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "reviewer_notes": {
          "name": "reviewer_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "reviewed_at": {
          "name": "reviewed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "human_reviews_extraction_run_id_extraction_runs_id_fk": {
          "name": "human_reviews_extraction_run_id_extraction_runs_id_fk",
          "tableFrom": "human_reviews",
          "tableTo": "extraction_runs",
          "columnsFrom": [
            "extraction_run_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "human_reviews_reviewer_id_users_id_fk": {
          "name": "human_reviews_reviewer_id_users_id_fk",
          "tableFrom": "human_reviews",
          "tableTo": "users",
          "columnsFrom": [
            "reviewer_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "human_reviews_organisation_id_organisations_id_fk": {
          "name": "human_reviews_organisation_id_organisations_id_fk",
          "tableFrom": "human_reviews",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "human_reviews_extraction_run_id_unique": {
          "name": "human_reviews_extraction_run_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "extraction_run_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.incoming_webhook_logs": {
      "name": "incoming_webhook_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payload": {
          "name": "payload",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "headers": {
          "name": "headers",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "processed": {
          "name": "processed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "processed_at": {
          "name": "processed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ingestion_batches": {
      "name": "ingestion_batches",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "total_files": {
          "name": "total_files",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "completed_files": {
          "name": "completed_files",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "failed_files": {
          "name": "failed_files",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "ingestion_batches_organisation_id_organisations_id_fk": {
          "name": "ingestion_batches_organisation_id_organisations_id_fk",
          "tableFrom": "ingestion_batches",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ingestion_jobs": {
      "name": "ingestion_jobs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "api_client_id": {
          "name": "api_client_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "upload_session_id": {
          "name": "upload_session_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "certificate_type": {
          "name": "certificate_type",
          "type": "certificate_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "property_uprn": {
          "name": "property_uprn",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "property_id": {
          "name": "property_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "file_name": {
          "name": "file_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "object_path": {
          "name": "object_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "ingestion_job_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'QUEUED'"
        },
        "progress": {
          "name": "progress",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "status_message": {
          "name": "status_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "certificate_id": {
          "name": "certificate_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "extraction_id": {
          "name": "extraction_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "error_details": {
          "name": "error_details",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "attempt_count": {
          "name": "attempt_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "max_attempts": {
          "name": "max_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 3
        },
        "last_attempt_at": {
          "name": "last_attempt_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "next_retry_at": {
          "name": "next_retry_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "webhook_url": {
          "name": "webhook_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "webhook_delivered": {
          "name": "webhook_delivered",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "idempotency_key": {
          "name": "idempotency_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "ingestion_jobs_organisation_id_organisations_id_fk": {
          "name": "ingestion_jobs_organisation_id_organisations_id_fk",
          "tableFrom": "ingestion_jobs",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "ingestion_jobs_api_client_id_api_clients_id_fk": {
          "name": "ingestion_jobs_api_client_id_api_clients_id_fk",
          "tableFrom": "ingestion_jobs",
          "tableTo": "api_clients",
          "columnsFrom": [
            "api_client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "ingestion_jobs_upload_session_id_upload_sessions_id_fk": {
          "name": "ingestion_jobs_upload_session_id_upload_sessions_id_fk",
          "tableFrom": "ingestion_jobs",
          "tableTo": "upload_sessions",
          "columnsFrom": [
            "upload_session_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "ingestion_jobs_property_id_properties_id_fk": {
          "name": "ingestion_jobs_property_id_properties_id_fk",
          "tableFrom": "ingestion_jobs",
          "tableTo": "properties",
          "columnsFrom": [
            "property_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "ingestion_jobs_certificate_id_certificates_id_fk": {
          "name": "ingestion_jobs_certificate_id_certificates_id_fk",
          "tableFrom": "ingestion_jobs",
          "tableTo": "certificates",
          "columnsFrom": [
            "certificate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "ingestion_jobs_idempotency_key_unique": {
          "name": "ingestion_jobs_idempotency_key_unique",
          "nullsNotDistinct": false,
          "columns": [
            "idempotency_key"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.knowledge_embeddings": {
      "name": "knowledge_embeddings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "source_type": {
          "name": "source_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "source_id": {
          "name": "source_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "embedding_model": {
          "name": "embedding_model",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "embedding": {
          "name": "embedding",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "risk_score": {
          "name": "risk_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.normalisation_rules": {
      "name": "normalisation_rules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "rule_name": {
          "name": "rule_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "field_path": {
          "name": "field_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "rule_type": {
          "name": "rule_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "compliance_stream_id": {
          "name": "compliance_stream_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "input_patterns": {
          "name": "input_patterns",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "output_value": {
          "name": "output_value",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "transform_fn": {
          "name": "transform_fn",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.organisations": {
      "name": "organisations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "settings": {
          "name": "settings",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "organisations_slug_unique": {
          "name": "organisations_slug_unique",
          "nullsNotDistinct": false,
          "columns": [
            "slug"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.properties": {
      "name": "properties",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "block_id": {
          "name": "block_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "uprn": {
          "name": "uprn",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "address_line1": {
          "name": "address_line1",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "address_line2": {
          "name": "address_line2",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "postcode": {
          "name": "postcode",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "property_type": {
          "name": "property_type",
          "type": "property_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "tenure": {
          "name": "tenure",
          "type": "tenure",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "bedrooms": {
          "name": "bedrooms",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "has_gas": {
          "name": "has_gas",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "compliance_status": {
          "name": "compliance_status",
          "type": "compliance_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'UNKNOWN'"
        },
        "source": {
          "name": "source",
          "type": "property_source",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'MANUAL'"
        },
        "needs_verification": {
          "name": "needs_verification",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "extracted_metadata": {
          "name": "extracted_metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "vulnerable_occupant": {
          "name": "vulnerable_occupant",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "epc_rating": {
          "name": "epc_rating",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "construction_year": {
          "name": "construction_year",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "number_of_floors": {
          "name": "number_of_floors",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "has_electricity": {
          "name": "has_electricity",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "has_asbestos": {
          "name": "has_asbestos",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "has_sprinklers": {
          "name": "has_sprinklers",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "local_authority": {
          "name": "local_authority",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "latitude": {
          "name": "latitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "longitude": {
          "name": "longitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "ward": {
          "name": "ward",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ward_code": {
          "name": "ward_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "lsoa": {
          "name": "lsoa",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "msoa": {
          "name": "msoa",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "geocoded_at": {
          "name": "geocoded_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "properties_block_id_blocks_id_fk": {
          "name": "properties_block_id_blocks_id_fk",
          "tableFrom": "properties",
          "tableTo": "blocks",
          "columnsFrom": [
            "block_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "properties_uprn_unique": {
          "name": "properties_uprn_unique",
          "nullsNotDistinct": false,
          "columns": [
            "uprn"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.property_risk_snapshots": {
      "name": "property_risk_snapshots",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "property_id": {
          "name": "property_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "snapshot_date": {
          "name": "snapshot_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "overall_score": {
          "name": "overall_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "risk_tier": {
          "name": "risk_tier",
          "type": "risk_tier",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'LOW'"
        },
        "expiry_risk_score": {
          "name": "expiry_risk_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "defect_risk_score": {
          "name": "defect_risk_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "asset_profile_risk_score": {
          "name": "asset_profile_risk_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "coverage_gap_risk_score": {
          "name": "coverage_gap_risk_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "external_factor_risk_score": {
          "name": "external_factor_risk_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "factor_breakdown": {
          "name": "factor_breakdown",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "triggering_factors": {
          "name": "triggering_factors",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "recommended_actions": {
          "name": "recommended_actions",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "legislation_references": {
          "name": "legislation_references",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "previous_score": {
          "name": "previous_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "score_change": {
          "name": "score_change",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "trend_direction": {
          "name": "trend_direction",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_latest": {
          "name": "is_latest",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "calculated_at": {
          "name": "calculated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "property_risk_snapshots_organisation_id_organisations_id_fk": {
          "name": "property_risk_snapshots_organisation_id_organisations_id_fk",
          "tableFrom": "property_risk_snapshots",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "property_risk_snapshots_property_id_properties_id_fk": {
          "name": "property_risk_snapshots_property_id_properties_id_fk",
          "tableFrom": "property_risk_snapshots",
          "tableTo": "properties",
          "columnsFrom": [
            "property_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.rate_limit_entries": {
      "name": "rate_limit_entries",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "client_id": {
          "name": "client_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "request_count": {
          "name": "request_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "window_start": {
          "name": "window_start",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "window_reset_at": {
          "name": "window_reset_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.remedial_actions": {
      "name": "remedial_actions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "certificate_id": {
          "name": "certificate_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "property_id": {
          "name": "property_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "location": {
          "name": "location",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "severity": {
          "name": "severity",
          "type": "severity",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "action_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'OPEN'"
        },
        "due_date": {
          "name": "due_date",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "cost_estimate": {
          "name": "cost_estimate",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "remedial_actions_certificate_id_certificates_id_fk": {
          "name": "remedial_actions_certificate_id_certificates_id_fk",
          "tableFrom": "remedial_actions",
          "tableTo": "certificates",
          "columnsFrom": [
            "certificate_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "remedial_actions_property_id_properties_id_fk": {
          "name": "remedial_actions_property_id_properties_id_fk",
          "tableFrom": "remedial_actions",
          "tableTo": "properties",
          "columnsFrom": [
            "property_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.risk_alerts": {
      "name": "risk_alerts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "property_id": {
          "name": "property_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "snapshot_id": {
          "name": "snapshot_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "alert_type": {
          "name": "alert_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "risk_tier": {
          "name": "risk_tier",
          "type": "risk_tier",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "risk_alert_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'OPEN'"
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "triggering_factors": {
          "name": "triggering_factors",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "risk_score": {
          "name": "risk_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "previous_score": {
          "name": "previous_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "due_date": {
          "name": "due_date",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "sla_hours": {
          "name": "sla_hours",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "escalation_level": {
          "name": "escalation_level",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "acknowledged_by_id": {
          "name": "acknowledged_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "acknowledged_at": {
          "name": "acknowledged_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_by_id": {
          "name": "resolved_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "resolution_notes": {
          "name": "resolution_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "linked_remedial_action_ids": {
          "name": "linked_remedial_action_ids",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "linked_certificate_ids": {
          "name": "linked_certificate_ids",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "risk_alerts_organisation_id_organisations_id_fk": {
          "name": "risk_alerts_organisation_id_organisations_id_fk",
          "tableFrom": "risk_alerts",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "risk_alerts_property_id_properties_id_fk": {
          "name": "risk_alerts_property_id_properties_id_fk",
          "tableFrom": "risk_alerts",
          "tableTo": "properties",
          "columnsFrom": [
            "property_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "risk_alerts_snapshot_id_property_risk_snapshots_id_fk": {
          "name": "risk_alerts_snapshot_id_property_risk_snapshots_id_fk",
          "tableFrom": "risk_alerts",
          "tableTo": "property_risk_snapshots",
          "columnsFrom": [
            "snapshot_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "risk_alerts_acknowledged_by_id_users_id_fk": {
          "name": "risk_alerts_acknowledged_by_id_users_id_fk",
          "tableFrom": "risk_alerts",
          "tableTo": "users",
          "columnsFrom": [
            "acknowledged_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "risk_alerts_resolved_by_id_users_id_fk": {
          "name": "risk_alerts_resolved_by_id_users_id_fk",
          "tableFrom": "risk_alerts",
          "tableTo": "users",
          "columnsFrom": [
            "resolved_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.risk_factor_definitions": {
      "name": "risk_factor_definitions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "factor_type": {
          "name": "factor_type",
          "type": "risk_factor_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "factor_name": {
          "name": "factor_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "weight": {
          "name": "weight",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 20
        },
        "max_score": {
          "name": "max_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 100
        },
        "thresholds": {
          "name": "thresholds",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "calculation_logic": {
          "name": "calculation_logic",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "legislation_reference": {
          "name": "legislation_reference",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "is_system": {
          "name": "is_system",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 50
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "risk_factor_definitions_organisation_id_organisations_id_fk": {
          "name": "risk_factor_definitions_organisation_id_organisations_id_fk",
          "tableFrom": "risk_factor_definitions",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.risk_snapshots": {
      "name": "risk_snapshots",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "level": {
          "name": "level",
          "type": "risk_level",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "level_id": {
          "name": "level_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "level_name": {
          "name": "level_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "composite_score": {
          "name": "composite_score",
          "type": "real",
          "primaryKey": false,
          "notNull": true
        },
        "gas_score": {
          "name": "gas_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "electrical_score": {
          "name": "electrical_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "fire_score": {
          "name": "fire_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "asbestos_score": {
          "name": "asbestos_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "lift_score": {
          "name": "lift_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "water_score": {
          "name": "water_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "critical_defects": {
          "name": "critical_defects",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "major_defects": {
          "name": "major_defects",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "minor_defects": {
          "name": "minor_defects",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "property_count": {
          "name": "property_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "unit_count": {
          "name": "unit_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "previous_score": {
          "name": "previous_score",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "trend": {
          "name": "trend",
          "type": "risk_trend",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "latitude": {
          "name": "latitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "longitude": {
          "name": "longitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "calculated_at": {
          "name": "calculated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "risk_snapshots_organisation_id_organisations_id_fk": {
          "name": "risk_snapshots_organisation_id_organisations_id_fk",
          "tableFrom": "risk_snapshots",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.schemes": {
      "name": "schemes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reference": {
          "name": "reference",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "compliance_status": {
          "name": "compliance_status",
          "type": "compliance_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'UNKNOWN'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "schemes_organisation_id_organisations_id_fk": {
          "name": "schemes_organisation_id_organisations_id_fk",
          "tableFrom": "schemes",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.system_logs": {
      "name": "system_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "level": {
          "name": "level",
          "type": "log_level",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "source": {
          "name": "source",
          "type": "log_source",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'system'"
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "context": {
          "name": "context",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "request_id": {
          "name": "request_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ukhds_exports": {
      "name": "ukhds_exports",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "requested_by_id": {
          "name": "requested_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "export_type": {
          "name": "export_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'FULL'"
        },
        "export_format": {
          "name": "export_format",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'JSON'"
        },
        "status": {
          "name": "status",
          "type": "ukhds_export_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "include_properties": {
          "name": "include_properties",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "include_components": {
          "name": "include_components",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "include_certificates": {
          "name": "include_certificates",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "include_certificate_versions": {
          "name": "include_certificate_versions",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "include_audit_trail": {
          "name": "include_audit_trail",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "include_remedial_actions": {
          "name": "include_remedial_actions",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "date_range_start": {
          "name": "date_range_start",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "date_range_end": {
          "name": "date_range_end",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "scheme_ids": {
          "name": "scheme_ids",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "total_records": {
          "name": "total_records",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "processed_records": {
          "name": "processed_records",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "storage_key": {
          "name": "storage_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "download_url": {
          "name": "download_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "ukhds_exports_organisation_id_organisations_id_fk": {
          "name": "ukhds_exports_organisation_id_organisations_id_fk",
          "tableFrom": "ukhds_exports",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "ukhds_exports_requested_by_id_users_id_fk": {
          "name": "ukhds_exports_requested_by_id_users_id_fk",
          "tableFrom": "ukhds_exports",
          "tableTo": "users",
          "columnsFrom": [
            "requested_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.units": {
      "name": "units",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "property_id": {
          "name": "property_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "reference": {
          "name": "reference",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "unit_type": {
          "name": "unit_type",
          "type": "unit_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "floor": {
          "name": "floor",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hact_location_code": {
          "name": "hact_location_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "area_sq_meters": {
          "name": "area_sq_meters",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "is_accessible": {
          "name": "is_accessible",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "fire_compartment": {
          "name": "fire_compartment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "asbestos_present": {
          "name": "asbestos_present",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "units_property_id_properties_id_fk": {
          "name": "units_property_id_properties_id_fk",
          "tableFrom": "units",
          "tableTo": "properties",
          "columnsFrom": [
            "property_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.upload_sessions": {
      "name": "upload_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "api_client_id": {
          "name": "api_client_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "file_name": {
          "name": "file_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_size": {
          "name": "file_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "content_type": {
          "name": "content_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "checksum": {
          "name": "checksum",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "upload_url": {
          "name": "upload_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "object_path": {
          "name": "object_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "upload_session_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true
        },
        "idempotency_key": {
          "name": "idempotency_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "upload_sessions_organisation_id_organisations_id_fk": {
          "name": "upload_sessions_organisation_id_organisations_id_fk",
          "tableFrom": "upload_sessions",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "upload_sessions_api_client_id_api_clients_id_fk": {
          "name": "upload_sessions_api_client_id_api_clients_id_fk",
          "tableFrom": "upload_sessions",
          "tableTo": "api_clients",
          "columnsFrom": [
            "api_client_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "upload_sessions_idempotency_key_unique": {
          "name": "upload_sessions_idempotency_key_unique",
          "nullsNotDistinct": false,
          "columns": [
            "idempotency_key"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "password": {
          "name": "password",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "user_role",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'VIEWER'"
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "users_organisation_id_organisations_id_fk": {
          "name": "users_organisation_id_organisations_id_fk",
          "tableFrom": "users",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_username_unique": {
          "name": "users_username_unique",
          "nullsNotDistinct": false,
          "columns": [
            "username"
          ]
        },
        "users_email_unique": {
          "name": "users_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.videos": {
      "name": "videos",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "uploaded_by_id": {
          "name": "uploaded_by_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "duration": {
          "name": "duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "file_name": {
          "name": "file_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_type": {
          "name": "file_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_size": {
          "name": "file_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "storage_key": {
          "name": "storage_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "thumbnail_key": {
          "name": "thumbnail_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "view_count": {
          "name": "view_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "download_count": {
          "name": "download_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "videos_organisation_id_organisations_id_fk": {
          "name": "videos_organisation_id_organisations_id_fk",
          "tableFrom": "videos",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "videos_uploaded_by_id_users_id_fk": {
          "name": "videos_uploaded_by_id_users_id_fk",
          "tableFrom": "videos",
          "tableTo": "users",
          "columnsFrom": [
            "uploaded_by_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.webhook_deliveries": {
      "name": "webhook_deliveries",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "webhook_endpoint_id": {
          "name": "webhook_endpoint_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "event_id": {
          "name": "event_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "webhook_delivery_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'PENDING'"
        },
        "attempt_count": {
          "name": "attempt_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_attempt_at": {
          "name": "last_attempt_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "next_retry_at": {
          "name": "next_retry_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "response_status": {
          "name": "response_status",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "response_body": {
          "name": "response_body",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "duration": {
          "name": "duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "webhook_deliveries_webhook_endpoint_id_webhook_endpoints_id_fk": {
          "name": "webhook_deliveries_webhook_endpoint_id_webhook_endpoints_id_fk",
          "tableFrom": "webhook_deliveries",
          "tableTo": "webhook_endpoints",
          "columnsFrom": [
            "webhook_endpoint_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "webhook_deliveries_event_id_webhook_events_id_fk": {
          "name": "webhook_deliveries_event_id_webhook_events_id_fk",
          "tableFrom": "webhook_deliveries",
          "tableTo": "webhook_events",
          "columnsFrom": [
            "event_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.webhook_endpoints": {
      "name": "webhook_endpoints",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "organisation_id": {
          "name": "organisation_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "auth_type": {
          "name": "auth_type",
          "type": "webhook_auth_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'NONE'"
        },
        "auth_value": {
          "name": "auth_value",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "headers": {
          "name": "headers",
          "type": "json",
          "primaryKey": false,
          "notNull": false
        },
        "events": {
          "name": "events",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "webhook_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'ACTIVE'"
        },
        "retry_count": {
          "name": "retry_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 3
        },
        "timeout_ms": {
          "name": "timeout_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 30000
        },
        "last_delivery_at": {
          "name": "last_delivery_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "last_delivery_status": {
          "name": "last_delivery_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "failure_count": {
          "name": "failure_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "webhook_endpoints_organisation_id_organisations_id_fk": {
          "name": "webhook_endpoints_organisation_id_organisations_id_fk",
          "tableFrom": "webhook_endpoints",
          "tableTo": "organisations",
          "columnsFrom": [
            "organisation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.webhook_events": {
      "name": "webhook_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "payload": {
          "name": "payload",
          "type": "json",
          "primaryKey": false,
          "notNull": true
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "entity_id": {
          "name": "entity_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "processed": {
          "name": "processed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.action_status": {
      "name": "action_status",
      "schema": "public",
      "values": [
        "OPEN",
        "IN_PROGRESS",
        "SCHEDULED",
        "COMPLETED",
        "CANCELLED"
      ]
    },
    "public.api_client_status": {
      "name": "api_client_status",
      "schema": "public",
      "values": [
        "ACTIVE",
        "SUSPENDED",
        "REVOKED"
      ]
    },
    "public.audit_actor_type": {
      "name": "audit_actor_type",
      "schema": "public",
      "values": [
        "USER",
        "SYSTEM",
        "API"
      ]
    },
    "public.audit_entity_type": {
      "name": "audit_entity_type",
      "schema": "public",
      "values": [
        "CERTIFICATE",
        "PROPERTY",
        "COMPONENT",
        "REMEDIAL_ACTION",
        "USER",
        "ORGANISATION",
        "API_KEY",
        "SETTINGS"
      ]
    },
    "public.audit_event_type": {
      "name": "audit_event_type",
      "schema": "public",
      "values": [
        "CERTIFICATE_UPLOADED",
        "CERTIFICATE_PROCESSED",
        "CERTIFICATE_STATUS_CHANGED",
        "CERTIFICATE_APPROVED",
        "CERTIFICATE_REJECTED",
        "CERTIFICATE_DELETED",
        "EXTRACTION_COMPLETED",
        "REMEDIAL_ACTION_CREATED",
        "REMEDIAL_ACTION_UPDATED",
        "REMEDIAL_ACTION_COMPLETED",
        "PROPERTY_CREATED",
        "PROPERTY_UPDATED",
        "PROPERTY_DELETED",
        "COMPONENT_CREATED",
        "COMPONENT_UPDATED",
        "USER_LOGIN",
        "USER_LOGOUT",
        "USER_CREATED",
        "USER_UPDATED",
        "USER_ROLE_CHANGED",
        "SETTINGS_CHANGED",
        "API_KEY_CREATED",
        "API_KEY_REVOKED",
        "BULK_IMPORT_COMPLETED"
      ]
    },
    "public.certificate_outcome": {
      "name": "certificate_outcome",
      "schema": "public",
      "values": [
        "SATISFACTORY",
        "UNSATISFACTORY",
        "PASS",
        "FAIL",
        "AT_RISK",
        "IMMEDIATELY_DANGEROUS"
      ]
    },
    "public.certificate_status": {
      "name": "certificate_status",
      "schema": "public",
      "values": [
        "UPLOADED",
        "PROCESSING",
        "EXTRACTED",
        "NEEDS_REVIEW",
        "APPROVED",
        "REJECTED",
        "FAILED"
      ]
    },
    "public.certificate_type": {
      "name": "certificate_type",
      "schema": "public",
      "values": [
        "GAS_SAFETY",
        "EICR",
        "EPC",
        "FIRE_RISK_ASSESSMENT",
        "LEGIONELLA_ASSESSMENT",
        "ASBESTOS_SURVEY",
        "LIFT_LOLER",
        "OTHER"
      ]
    },
    "public.change_scope": {
      "name": "change_scope",
      "schema": "public",
      "values": [
        "PROPERTY",
        "COMPONENT",
        "BUILDING_FABRIC",
        "CERTIFICATE",
        "REMEDIAL_ACTION",
        "CONTRACTOR",
        "USER",
        "SETTINGS",
        "SCHEME",
        "BLOCK"
      ]
    },
    "public.chat_intent": {
      "name": "chat_intent",
      "schema": "public",
      "values": [
        "greeting",
        "navigation",
        "database",
        "faq",
        "rag",
        "off_topic",
        "complex"
      ]
    },
    "public.chat_response_source": {
      "name": "chat_response_source",
      "schema": "public",
      "values": [
        "static",
        "faq_cache",
        "faq_tfidf",
        "database",
        "rag",
        "llm"
      ]
    },
    "public.compliance_status": {
      "name": "compliance_status",
      "schema": "public",
      "values": [
        "COMPLIANT",
        "EXPIRING_SOON",
        "OVERDUE",
        "NON_COMPLIANT",
        "ACTION_REQUIRED",
        "UNKNOWN"
      ]
    },
    "public.component_category": {
      "name": "component_category",
      "schema": "public",
      "values": [
        "HEATING",
        "ELECTRICAL",
        "FIRE_SAFETY",
        "WATER",
        "VENTILATION",
        "STRUCTURE",
        "ACCESS",
        "SECURITY",
        "EXTERNAL",
        "OTHER"
      ]
    },
    "public.contractor_registration_type": {
      "name": "contractor_registration_type",
      "schema": "public",
      "values": [
        "GAS_SAFE",
        "NICEIC",
        "NAPIT",
        "ELECSA",
        "ECS",
        "OFTEC",
        "HETAS",
        "BESCA",
        "FENSA",
        "CHAS",
        "SAFE_CONTRACTOR",
        "CONSTRUCTIONLINE",
        "CIOB",
        "PAS_8672",
        "SSIP",
        "OTHER"
      ]
    },
    "public.contractor_status": {
      "name": "contractor_status",
      "schema": "public",
      "values": [
        "PENDING",
        "APPROVED",
        "REJECTED",
        "SUSPENDED"
      ]
    },
    "public.contractor_verification_status": {
      "name": "contractor_verification_status",
      "schema": "public",
      "values": [
        "UNVERIFIED",
        "PENDING",
        "VERIFIED",
        "EXPIRED",
        "SUSPENDED",
        "REVOKED",
        "FAILED"
      ]
    },
    "public.contractor_work_category": {
      "name": "contractor_work_category",
      "schema": "public",
      "values": [
        "GAS_BOILER",
        "GAS_APPLIANCES",
        "GAS_FIRES",
        "ELECTRICAL_INSTALL",
        "ELECTRICAL_TEST",
        "FIRE_ALARM",
        "FIRE_DOOR",
        "FIRE_EXTINGUISHER",
        "LIFT_MAINTENANCE",
        "LEGIONELLA",
        "ASBESTOS_SURVEY",
        "ASBESTOS_REMOVAL",
        "WATER_HYGIENE",
        "EPC_ASSESSMENT",
        "GENERAL_MAINTENANCE",
        "ROOFING",
        "PLUMBING",
        "OTHER"
      ]
    },
    "public.detection_matcher_type": {
      "name": "detection_matcher_type",
      "schema": "public",
      "values": [
        "CONTAINS",
        "REGEX",
        "STARTS_WITH",
        "ENDS_WITH"
      ]
    },
    "public.detection_pattern_type": {
      "name": "detection_pattern_type",
      "schema": "public",
      "values": [
        "FILENAME",
        "TEXT_CONTENT"
      ]
    },
    "public.extraction_status": {
      "name": "extraction_status",
      "schema": "public",
      "values": [
        "PENDING",
        "PROCESSING",
        "VALIDATION_FAILED",
        "REPAIR_IN_PROGRESS",
        "AWAITING_REVIEW",
        "APPROVED",
        "REJECTED"
      ]
    },
    "public.extraction_tier_status": {
      "name": "extraction_tier_status",
      "schema": "public",
      "values": [
        "success",
        "escalated",
        "skipped",
        "failed",
        "pending"
      ]
    },
    "public.import_row_status": {
      "name": "import_row_status",
      "schema": "public",
      "values": [
        "PENDING",
        "VALID",
        "INVALID",
        "IMPORTED",
        "SKIPPED",
        "FAILED"
      ]
    },
    "public.import_status": {
      "name": "import_status",
      "schema": "public",
      "values": [
        "PENDING",
        "VALIDATING",
        "VALIDATED",
        "IMPORTING",
        "COMPLETED",
        "FAILED",
        "CANCELLED"
      ]
    },
    "public.ingestion_job_status": {
      "name": "ingestion_job_status",
      "schema": "public",
      "values": [
        "QUEUED",
        "UPLOADING",
        "PROCESSING",
        "EXTRACTING",
        "COMPLETE",
        "FAILED",
        "CANCELLED"
      ]
    },
    "public.log_level": {
      "name": "log_level",
      "schema": "public",
      "values": [
        "trace",
        "debug",
        "info",
        "warn",
        "error",
        "fatal"
      ]
    },
    "public.log_source": {
      "name": "log_source",
      "schema": "public",
      "values": [
        "api",
        "job-queue",
        "extraction",
        "webhook",
        "http",
        "system"
      ]
    },
    "public.outcome_rule_operator": {
      "name": "outcome_rule_operator",
      "schema": "public",
      "values": [
        "EQUALS",
        "NOT_EQUALS",
        "CONTAINS",
        "NOT_CONTAINS",
        "GREATER_THAN",
        "LESS_THAN",
        "GREATER_OR_EQUAL",
        "LESS_OR_EQUAL",
        "IS_TRUE",
        "IS_FALSE",
        "IS_NULL",
        "IS_NOT_NULL",
        "IN_LIST",
        "NOT_IN_LIST",
        "REGEX_MATCH",
        "ARRAY_ANY_MATCH",
        "ARRAY_ALL_MATCH"
      ]
    },
    "public.property_source": {
      "name": "property_source",
      "schema": "public",
      "values": [
        "MANUAL",
        "AUTO_EXTRACTED",
        "IMPORTED"
      ]
    },
    "public.property_type": {
      "name": "property_type",
      "schema": "public",
      "values": [
        "HOUSE",
        "FLAT",
        "BUNGALOW",
        "MAISONETTE",
        "BEDSIT",
        "STUDIO"
      ]
    },
    "public.risk_alert_status": {
      "name": "risk_alert_status",
      "schema": "public",
      "values": [
        "OPEN",
        "ACKNOWLEDGED",
        "ESCALATED",
        "RESOLVED",
        "DISMISSED"
      ]
    },
    "public.risk_factor_type": {
      "name": "risk_factor_type",
      "schema": "public",
      "values": [
        "EXPIRY_RISK",
        "DEFECT_RISK",
        "ASSET_PROFILE_RISK",
        "COVERAGE_GAP_RISK",
        "EXTERNAL_FACTOR_RISK"
      ]
    },
    "public.risk_level": {
      "name": "risk_level",
      "schema": "public",
      "values": [
        "property",
        "block",
        "scheme",
        "ward",
        "organisation"
      ]
    },
    "public.risk_tier": {
      "name": "risk_tier",
      "schema": "public",
      "values": [
        "CRITICAL",
        "HIGH",
        "MEDIUM",
        "LOW"
      ]
    },
    "public.risk_trend": {
      "name": "risk_trend",
      "schema": "public",
      "values": [
        "improving",
        "stable",
        "deteriorating"
      ]
    },
    "public.severity": {
      "name": "severity",
      "schema": "public",
      "values": [
        "IMMEDIATE",
        "URGENT",
        "PRIORITY",
        "ROUTINE",
        "ADVISORY"
      ]
    },
    "public.suggestion_category": {
      "name": "suggestion_category",
      "schema": "public",
      "values": [
        "PROMPT",
        "PREPROCESSING",
        "VALIDATION",
        "TRAINING",
        "QUALITY",
        "REVIEW"
      ]
    },
    "public.suggestion_status": {
      "name": "suggestion_status",
      "schema": "public",
      "values": [
        "ACTIVE",
        "IN_PROGRESS",
        "RESOLVED",
        "DISMISSED",
        "AUTO_RESOLVED"
      ]
    },
    "public.tenure": {
      "name": "tenure",
      "schema": "public",
      "values": [
        "SOCIAL_RENT",
        "AFFORDABLE_RENT",
        "SHARED_OWNERSHIP",
        "LEASEHOLD",
        "TEMPORARY"
      ]
    },
    "public.ukhds_export_status": {
      "name": "ukhds_export_status",
      "schema": "public",
      "values": [
        "PENDING",
        "PROCESSING",
        "COMPLETED",
        "FAILED",
        "EXPIRED"
      ]
    },
    "public.unit_type": {
      "name": "unit_type",
      "schema": "public",
      "values": [
        "DWELLING",
        "COMMUNAL_AREA",
        "PLANT_ROOM",
        "ROOF_SPACE",
        "BASEMENT",
        "EXTERNAL",
        "GARAGE",
        "COMMERCIAL",
        "OTHER"
      ]
    },
    "public.upload_session_status": {
      "name": "upload_session_status",
      "schema": "public",
      "values": [
        "PENDING",
        "UPLOADING",
        "COMPLETED",
        "EXPIRED",
        "FAILED"
      ]
    },
    "public.user_role": {
      "name": "user_role",
      "schema": "public",
      "values": [
        "LASHAN_SUPER_USER",
        "SUPER_ADMIN",
        "SYSTEM_ADMIN",
        "COMPLIANCE_MANAGER",
        "ADMIN",
        "MANAGER",
        "OFFICER",
        "VIEWER"
      ]
    },
    "public.webhook_auth_type": {
      "name": "webhook_auth_type",
      "schema": "public",
      "values": [
        "NONE",
        "API_KEY",
        "BEARER",
        "HMAC_SHA256"
      ]
    },
    "public.webhook_delivery_status": {
      "name": "webhook_delivery_status",
      "schema": "public",
      "values": [
        "PENDING",
        "SENT",
        "FAILED",
        "RETRYING"
      ]
    },
    "public.webhook_status": {
      "name": "webhook_status",
      "schema": "public",
      "values": [
        "ACTIVE",
        "PAUSED",
        "FAILED",
        "DISABLED"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}