# ============================================================================
# ComplianceAI Environment Variables
# ============================================================================
# Copy this file to .env and fill in appropriate values for your environment.
# Variables marked (Required) must be set for the application to function.
# Variables marked (Optional) have sensible defaults or enable optional features.
# ============================================================================

# ============================================================================
# DATABASE
# ============================================================================

# PostgreSQL connection string (Required)
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://user:password@localhost:5432/complianceai

# Database connection pool size (Optional, default: 50)
# Adjust based on your database and workload requirements
DB_POOL_SIZE=50

# ============================================================================
# SERVER
# ============================================================================

# Server port (Optional, default: 5000)
PORT=5000

# Environment mode (Optional, default: development)
# Values: development, production, test
NODE_ENV=development

# Session/Auth secret key (Required in production)
# Generate with: openssl rand -base64 32
# CRITICAL: Must be set to a secure random value in production
SESSION_SECRET=your-secure-random-secret-here

# Better Auth secret key (Optional, falls back to SESSION_SECRET)
# Generate with: openssl rand -base64 32
# BETTER_AUTH_SECRET=your-secure-random-secret-here

# Log level (Optional, default: info in production, debug in development)
# Values: trace, debug, info, warn, error, fatal
LOG_LEVEL=info

# ============================================================================
# LOCAL DEVELOPMENT / PROXY
# ============================================================================

# Trust proxy setting for Express (Optional, default: 1)
# Controls how Express handles X-Forwarded-* headers behind reverse proxies
# Values:
#   - Number (e.g., 1): Trust the first N hops
#   - "true": Trust all proxies
#   - Comma-separated IPs: Trust specific proxy IP addresses
TRUST_PROXY=1

# ============================================================================
# STORAGE
# ============================================================================

# Storage provider type (Optional, default: replit)
# Values: replit, s3, azure_blob, gcs, local
STORAGE_PROVIDER=replit

# Default object storage bucket ID (Optional, set by Replit integration)
# DEFAULT_OBJECT_STORAGE_BUCKET_ID=your-bucket-id

# Object storage paths (Auto-configured by Replit Object Storage integration)
# PRIVATE_OBJECT_DIR=.private
# PUBLIC_OBJECT_SEARCH_PATHS=public

# --- AWS S3 Storage Options ---
# (Required if STORAGE_PROVIDER=s3)

# AWS Region
AWS_REGION=us-east-1

# AWS Credentials
AWS_ACCESS_KEY_ID=your-access-key-id
AWS_SECRET_ACCESS_KEY=your-secret-access-key

# S3 Bucket names
S3_PUBLIC_BUCKET=your-public-bucket
S3_PRIVATE_BUCKET=your-private-bucket

# S3 Custom endpoint for S3-compatible services like MinIO (Optional)
# S3_ENDPOINT=https://s3.custom-endpoint.com

# Force path style URLs for S3-compatible services (Optional, default: false)
# S3_FORCE_PATH_STYLE=true

# --- Azure Blob Storage Options ---
# (Required if STORAGE_PROVIDER=azure_blob)

# Azure Storage account name
AZURE_STORAGE_ACCOUNT_NAME=your-storage-account

# Azure Storage authentication (use one of these)
AZURE_STORAGE_ACCOUNT_KEY=your-account-key
# OR
# AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=...

# Azure container names
AZURE_PUBLIC_CONTAINER=public
AZURE_PRIVATE_CONTAINER=private

# --- Google Cloud Storage Options ---
# (Required if STORAGE_PROVIDER=gcs)

# GCP Project ID
GCP_PROJECT_ID=your-project-id

# GCS Bucket names
GCS_PUBLIC_BUCKET=your-public-bucket
GCS_PRIVATE_BUCKET=your-private-bucket

# Path to service account key file (Optional if using Application Default Credentials)
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# --- Local Storage Options ---
# (Required if STORAGE_PROVIDER=local)

# Local storage directory path
LOCAL_STORAGE_PATH=./data/storage

# Base URL for serving public files (Optional)
# LOCAL_STORAGE_PUBLIC_URL=http://localhost:5000/files

# ============================================================================
# AI SERVICES
# ============================================================================

# --- Anthropic Claude ---
# (Optional, enables AI-powered document extraction and assistant)

# Anthropic API key
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-your-api-key-here

# --- OpenAI ---
# (Optional, alternative AI provider)

# OpenAI API key
# Get from: https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-your-openai-api-key

# --- Azure Document Intelligence ---
# (Optional, for document OCR and form recognition)

# Azure Document Intelligence endpoint
# Format: https://<resource-name>.cognitiveservices.azure.com/
AZURE_DOCUMENT_INTELLIGENCE_ENDPOINT=https://your-resource.cognitiveservices.azure.com/

# Azure Document Intelligence API key
AZURE_DOCUMENT_INTELLIGENCE_KEY=your-api-key-here

# --- Ollama (Local LLM) ---
# (Optional, for self-hosted AI using Ollama)

# Ollama base URL (default: http://localhost:11434)
OLLAMA_BASE_URL=http://localhost:11434

# Ollama text model (default: llama3.1)
OLLAMA_MODEL=llama3.1

# Ollama vision model (default: llava)
OLLAMA_VISION_MODEL=llava

# ============================================================================
# SSO / OAUTH PROVIDERS
# ============================================================================
# Configure one or more SSO providers for enterprise authentication.
# All SSO configurations are optional - only configure the providers you need.

# --- Microsoft Entra ID (Azure AD) ---
# (Optional, enables "Sign in with Microsoft")

# Azure AD Tenant ID
AZURE_TENANT_ID=your-tenant-id

# Azure AD Application (client) ID
AZURE_CLIENT_ID=your-client-id

# Azure AD Client secret
AZURE_CLIENT_SECRET=your-client-secret

# --- Google OAuth ---
# (Optional, enables "Sign in with Google")

# Google OAuth Client ID
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com

# Google OAuth Client Secret
GOOGLE_CLIENT_SECRET=your-client-secret

# --- Okta ---
# (Optional, enables Okta SSO)

# Okta domain (e.g., your-org.okta.com)
OKTA_DOMAIN=https://your-org.okta.com

# Okta Application Client ID
OKTA_CLIENT_ID=your-client-id

# Okta Application Client Secret
OKTA_CLIENT_SECRET=your-client-secret

# Okta Authorization Server (Optional, default: default)
# OKTA_AUTH_SERVER=default

# --- Keycloak ---
# (Optional, enables Keycloak SSO)

# Keycloak server URL
KEYCLOAK_URL=https://keycloak.your-domain.com

# Keycloak Realm name
KEYCLOAK_REALM=your-realm

# Keycloak Client ID
KEYCLOAK_CLIENT_ID=your-client-id

# Keycloak Client Secret
KEYCLOAK_CLIENT_SECRET=your-client-secret

# --- Generic OIDC Provider ---
# (Optional, for any standards-compliant OIDC provider)

# OIDC Discovery URL (/.well-known/openid-configuration endpoint)
OIDC_DISCOVERY_URL=https://your-idp.com/.well-known/openid-configuration

# OIDC Client ID
OIDC_CLIENT_ID=your-client-id

# OIDC Client Secret
OIDC_CLIENT_SECRET=your-client-secret

# OIDC Provider ID (Optional, default: generic-oidc)
# Used for routing and display purposes
# OIDC_PROVIDER_ID=custom-idp

# OIDC Scopes (Optional, default: openid,profile,email)
# Comma-separated list of OAuth scopes
# OIDC_SCOPES=openid,profile,email

# Enable PKCE for OIDC (Optional, default: true)
# Set to "false" to disable PKCE
# OIDC_PKCE=true

# ============================================================================
# MONITORING / OBSERVABILITY
# ============================================================================

# --- Sentry Error Tracking ---
# (Optional, enables error tracking and monitoring)

# Sentry DSN (Data Source Name)
# Get from: https://sentry.io/
# SENTRY_DSN=https://examplePublicKey@o0.ingest.sentry.io/0

# ============================================================================
# ADMIN / API
# ============================================================================

# Admin API Token (Optional)
# Used for authenticating admin API requests from external systems
# ADMIN_API_TOKEN=your-secure-admin-token
